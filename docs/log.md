λ„¤, `Phase 2` μ‹μ‘μ„ μ„ν• ν›λ¥­ν•κ³  μ²΄κ³„μ μΈ κ³„νμ…λ‹λ‹¤. `useCameraPermission`κ³Ό `useEffect`λ¥Ό μ‚¬μ©ν•λ” κ²ƒμ€ `react-native-vision-camera`λ¥Ό μ—°λ™ν•λ” μ •ν™•ν• λ°©λ²•μ…λ‹λ‹¤.

μ΄ κ³„νμ„ **λ”μ± κ²¬κ³ ν•κ²** λ§λ“¤κ³  **μ‚¬μ©μ κ²½ν—(UX)μ„ ν–¥μƒ**μ‹ν‚¬ μ μλ” ν•µμ‹¬ κ°μ„  μ‚¬ν•­ ν• κ°€μ§€λ¥Ό μ μ•ν•©λ‹λ‹¤.

-----

### π€ ν•µμ‹¬ κ°μ„ : `useIsFocused` ν›… μ¶”κ°€

ν„μ¬ κ³„νμ€ μ»΄ν¬λ„νΈκ°€ μ²μ λ§μ΄νΈλ  λ•(`useEffect`) κ¶ν•μ„ ν™•μΈν•©λ‹λ‹¤. ν•μ§€λ§ λ‹¤μκ³Ό κ°™μ€ μ—£μ§€ μΌ€μ΄μ¤κ°€ λ°μƒν•  μ μμµλ‹λ‹¤.

  * **λ¬Έμ  μƒν™©:**

    1.  μ‚¬μ©μκ°€ `app/(tabs)/scan.tsx` νƒ­μ— μ§„μ…ν•©λ‹λ‹¤.
    2.  κ¶ν• μ”μ²­ νμ—…μ΄ λ¨κ³ , μ‚¬μ©μκ°€ "κ±°λ¶€"λ¥Ό λ„λ¦…λ‹λ‹¤.
    3.  μ‚¬μ©μκ°€ μ•±μ„ λ‚κ°€μ§€ μ•κ³ , μ¤λ§νΈν°μ "μ„¤μ •"μ— μ§μ ‘ λ“¤μ–΄κ°€μ„ μλ™μΌλ΅ μΉ΄λ©”λΌ κ¶ν•μ„ "ν—μ©"ν•©λ‹λ‹¤.
    4.  λ‹¤μ‹ μ•±μΌλ΅ λμ•„μ™€λ„, `scan.tsx` ν™”λ©΄μ€ μ΄λ―Έ λ§μ΄νΈκ°€ λλ‚¬κΈ° λ•λ¬Έμ— `useEffect`κ°€ λ‹¤μ‹ μ‹¤ν–‰λμ§€ μ•μ•„, μ•±μ€ μ—¬μ „ν κ¶ν•μ΄ "κ±°λ¶€"λ κ²ƒμΌλ΅ μΈμ‹ν•©λ‹λ‹¤.

  * **ν•΄κ²°μ±…:**

      * `@react-navigation/native`μ **`useIsFocused`** ν›…μ„ μ‚¬μ©ν•©λ‹λ‹¤.
      * μ΄ ν›…μ€ μ‚¬μ©μκ°€ `scan.tsx` νƒ­μ„ **λ³Ό λ•λ§λ‹¤** `true`κ°€ λ©λ‹λ‹¤.
      * `useEffect`κ°€ `isFocused` μƒνƒμ— μμ΅΄ν•κ² λ§λ“¤λ©΄, μ‚¬μ©μκ°€ μ΄ νƒ­μΌλ΅ λμ•„μ¬ λ•λ§λ‹¤ κ¶ν•μ„ λ‹¤μ‹ ν™•μΈν•  μ μμµλ‹λ‹¤.

-----

### π“ κ°μ„ λ μ„Έλ¶€ κ³„ν (v2)

1.  **ν•„μ”ν• ν›… λ¨λ‘ μ„ν¬νΈ:**

      * `app/(tabs)/scan.tsx` νμΌμ— λ‹¤μ ν›…λ“¤μ„ μ„ν¬νΈν•©λ‹λ‹¤.
      * `useCameraPermission`, `useCameraDevice` (from `react-native-vision-camera`)
      * `useEffect`, `useState` (from `react`)
      * `useIsFocused` (from `@react-navigation/native`)

2.  **μƒνƒ κ΄€λ¦¬:**

    ```tsx
    import { useCameraPermission, useCameraDevice } from 'react-native-vision-camera';
    import { useIsFocused } from '@react-navigation/native';

    // ...
    const { hasPermission, requestPermission } = useCameraPermission();
    const device = useCameraDevice('back');
    const isFocused = useIsFocused();
    ```

3.  **UI λ λ”λ§ λ΅μ§ (v2):**

      * **1μμ„ (λ””λ°”μ΄μ¤ ν™•μΈ):** `device == null` μ΄λ©΄, "μΉ΄λ©”λΌλ¥Ό μ°Ύμ„ μ μ—†μµλ‹λ‹¤" λλ” λ΅λ”© μ¤ν”Όλ„λ¥Ό ν‘μ‹ν•©λ‹λ‹¤.
      * **2μμ„ (κ¶ν• ν™•μΈ):** `!hasPermission` μ΄λ©΄, "μΉ΄λ©”λΌ κ¶ν•μ΄ ν•„μ”ν•©λ‹λ‹¤"λΌλ” ν…μ¤νΈμ™€ `onPress={requestPermission}`κ°€ μ—°κ²°λ "κ¶ν• μ”μ²­" λ²„νΌμ„ λ λ”λ§ν•©λ‹λ‹¤.
      * **3μμ„ (μΉ΄λ©”λΌ λ λ”λ§):** `device`μ™€ `hasPermission`μ΄ λ¨λ‘ μ¤€λΉ„λλ©΄ `<Camera>` μ»΄ν¬λ„νΈλ¥Ό λ λ”λ§ν•©λ‹λ‹¤.

4.  **β¨ (ν•µμ‹¬) `<Camera>` μ»΄ν¬λ„νΈ μµμ ν™”:**

      * `<Camera>` μ»΄ν¬λ„νΈμ `isActive` propμ— `isFocused`λ¥Ό μ „λ‹¬ν•©λ‹λ‹¤.

    <!-- end list -->

    ```tsx
    if (device != null && hasPermission) {
      return (
        <Camera
          style={{ flex: 1 }}
          device={device}
          isActive={isFocused} // β¨ μ‚¬μ©μκ°€ μ΄ νƒ­μ„ λ³Ό λ•λ§ μΉ΄λ©”λΌ ν™μ„±ν™”
          // ... (Phase 2μ λ°”μ½”λ“ μ¤μΊλ„ propsλ” μ—¬κΈ°μ— μ¶”κ°€)
        />
      );
    }
    ```

      * **μ΄μ :** `isFocused`λ¥Ό `isActive`μ— μ—°κ²°ν•λ©΄, μ‚¬μ©μκ°€ 'μ¬κ³ 'λ‚ 'μ„¤μ •' νƒ­μΌλ΅ μ΄λ™ν•  λ• μΉ΄λ©”λΌκ°€ μλ™μΌλ΅ λΉ„ν™μ„±ν™”λμ–΄ λ°°ν„°λ¦¬μ™€ μ‹μ¤ν… λ¦¬μ†μ¤λ¥Ό ν¬κ² μ μ•½ν•  μ μμµλ‹λ‹¤.

μ΄ κ°μ„ μ•μ„ λ°μν•λ©΄, μ–΄λ–¤ μƒν™©μ—μ„λ“  μ‚¬μ©μμ κ¶ν• μƒνƒλ¥Ό μ•±μ΄ μ •ν™•ν•κ² μΈμ§€ν•κ³  λ°μ‘ν•  μ μκ² λ©λ‹λ‹¤.